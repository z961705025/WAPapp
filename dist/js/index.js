var app=angular.module("app",["ui.router"]);app.controller("AppController",["$scope","$window","$location",function(t,e,i){t.titleAPP="天天一刻",t.title="首页",t.id="0",t.$on("tab_notifice",function(e,i){var o=["首页","热门作者","栏目浏览","个人主页"];t.id=i.id,t.$emit("home_notifice",{title:o[i.id]})}),t.back=function(){e.history.back()},t.hidde=!1,t.location=i,t.$watch("location.url()",function(e,i){var o=e.toString().slice(6);t.hidde="list"!=o})}]),app.directive("navs",function(){return{restrict:"EA",replace:!0,templateUrl:"../views/nav_tpl.html",controller:["$scope",function(t){t.$on("home_notifice",function(e,i){t.title=i.title})}],link:function(t,e,i){"true"!=i.isBack&&e.find("span").css({display:"none"})}}}),app.directive("tab",function(){return{restrict:"EA",replace:!0,templateUrl:"../views/tab_tpl.html",controller:"TabController",link:function(t,e,i){t.$watch("id",function(i,o){for(var l=e.children()[0].children,n=0;n<l.length;n++)l[n].className=" ";l[t.id].className="ava"})}}}),app.controller("TabController",["$scope",function(t){t.tabChange=function(e){console.log(e),t.$emit("tab_notifice",{id:e})}}]),app.config(["$stateProvider","$urlRouterProvider",function(t,e){t.state("home",{url:"/home",views:{home:{templateUrl:"../views/home_tpl.html",controller:"HomeController"},author:{template:"<h1>作者</h1>"},content:{template:"<h2>content</h2>"},my:{template:"<h2>my</h2>"}}}).state("home.list",{url:"/list",templateUrl:"../views/list_tpl.html"}).state("home.detail",{url:"/detail/:id",template:"<details></details>",controller:"DetailController"}),e.otherwise("home/list")}]),app.directive("details",function(){return{restrict:"EA",template:'<div class="home_detail"><div ui-view></div></div>',replace:!0,link:function(t,e,i){e.html(t.item.content)}}}),app.controller("HomeController",["$scope","$http",function(t,e){t.title="我是一个人",e({url:"http://127.0.0.1:8080/api/home.php",method:"jsonp"}).then(function(e){t.regsData=e.data}).catch(function(t){console.log(t)})}]),app.controller("DetailController",["$scope","$stateParams",function(t,e){var i=e.id;t.item=t.regsData.posts[i]}]),app.config(["$sceDelegateProvider",function(t){t.resourceUrlWhitelist(["self","http://127.0.0.1:8080/api/**"])}]);